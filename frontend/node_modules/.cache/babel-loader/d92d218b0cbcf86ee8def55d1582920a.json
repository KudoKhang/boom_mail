{"ast":null,"code":"import _classCallCheck from \"/Users/NghiaKhang/Coding/Projects/portal-login-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/NghiaKhang/Coding/Projects/portal-login-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/NghiaKhang/Coding/Projects/portal-login-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/NghiaKhang/Coding/Projects/portal-login-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/NghiaKhang/Coding/Projects/portal-login-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/NghiaKhang/Coding/Projects/portal-login-react/src/App.js\";\nimport React, { Component } from 'react';\nimport { Routes, Route, Link } from \"react-router-dom\";\nimport Home from './pages/Home';\nimport './App.css';\nimport axios from \"axios\";\nimport { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\nimport loginImg from './login.png';\nvar FormItem = Form.Item;\n\nvar NormalLoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NormalLoginForm, _Component);\n\n  function NormalLoginForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NormalLoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NormalLoginForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.isLoggedIn = function () {\n      // window.loggedUsername should be defined by UI page / jelly script\n      // if it's 'guest' that means there is no active user session\n      if (window.loggedUsername === 'guest') {\n        return false;\n      } else {\n        return true; // set it to false for local development to prevent passing through\n      }\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var details = {\n            sysparm_type: \"login\",\n            \"ni.nolog.user_password\": true,\n            remember_me: values.remember,\n            user_name: values.userName,\n            user_password: values.password,\n            get_redirect_url: true,\n            sysparm_goto_url: \"navpage.do\"\n          };\n          var formBody = [];\n\n          for (var property in details) {\n            var encodedKey = encodeURIComponent(property);\n            var encodedValue = encodeURIComponent(details[property]);\n            formBody.push(encodedKey + \"=\" + encodedValue);\n          }\n\n          formBody = formBody.join(\"&\");\n          axios({\n            method: \"post\",\n            url: \"angular.do?sysparm_type=view_form.login\",\n            data: formBody,\n            config: {\n              headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n              }\n            }\n          }).then(function (response) {\n            if (response.data.status === 'error') {\n              message.error(response.data.message);\n            } else if (response.data.status === 'success') {\n              message.success(response.data.message);\n              setTimeout(function () {\n                window.location = window.mainAppPage;\n              }, 500);\n            } else {\n              message.warning('Unknown response status' + response.data.message);\n            }\n          }).catch(function (response) {\n            message.error('Network error. Cannot log in.');\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(NormalLoginForm, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n\n      if (this.isLoggedIn()) {\n        window.location = window.mainAppPage;\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.isLoggedIn() ? ' ' : ' hidden',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Successfully logged in...\"), React.createElement(\"div\", {\n        className: \"lContainer\" + (this.isLoggedIn() ? ' hidden' : ' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"lItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"loginImage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: loginImg,\n        width: \"300\",\n        style: {\n          position: 'relative'\n        },\n        alt: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"loginForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, getFieldDecorator(\"userName\", {\n        rules: [{\n          required: true,\n          message: \"Please enter your username\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"user\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }),\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, getFieldDecorator(\"password\", {\n        rules: [{\n          required: true,\n          message: \"Please enter your Password\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"lock\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }),\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, getFieldDecorator(\"remember\", {\n        valuePropName: \"checked\",\n        initialValue: true\n      })(React.createElement(Checkbox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Remember me\")), React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"login-form-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Log in\"))))), React.createElement(\"div\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"footerLink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Powered by React\"))));\n    }\n  }]);\n\n  return NormalLoginForm;\n}(Component);\n\nvar login = Form.create()(NormalLoginForm);\n\nfunction App() {\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"Home\")), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/about\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"About\")), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Users\")))), React.createElement(Routes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/\",\n    element: React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/about\",\n    element: React.createElement(\"login\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/NghiaKhang/Coding/Projects/portal-login-react/src/App.js"],"names":["React","Component","Routes","Route","Link","Home","axios","Form","Icon","Input","Button","Checkbox","message","loginImg","FormItem","Item","NormalLoginForm","isLoggedIn","window","loggedUsername","handleSubmit","e","preventDefault","props","form","validateFields","err","values","details","sysparm_type","remember_me","remember","user_name","userName","user_password","password","get_redirect_url","sysparm_goto_url","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","method","url","data","config","headers","then","response","status","error","success","setTimeout","location","mainAppPage","warning","catch","getFieldDecorator","position","rules","required","color","valuePropName","initialValue","login","create","App"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n  Routes,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport Home from './pages/Home';\nimport './App.css';\nimport axios from \"axios\";\nimport { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\nimport loginImg from './login.png'\nconst FormItem = Form.Item;\n\nclass NormalLoginForm extends Component {\n  \n  isLoggedIn = () => {\n    // window.loggedUsername should be defined by UI page / jelly script\n    // if it's 'guest' that means there is no active user session\n    if (window.loggedUsername==='guest') {\n      return false;\n    } else {\n      return true; // set it to false for local development to prevent passing through\n    }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        var details = {\n          sysparm_type: \"login\",\n          \"ni.nolog.user_password\": true,\n          remember_me: values.remember,\n          user_name: values.userName,\n          user_password: values.password,\n          get_redirect_url: true,\n          sysparm_goto_url: \"navpage.do\"\n        };\n\n        var formBody = [];\n        for (var property in details) {\n          var encodedKey = encodeURIComponent(property);\n          var encodedValue = encodeURIComponent(details[property]);\n          formBody.push(encodedKey + \"=\" + encodedValue);\n        }\n        formBody = formBody.join(\"&\");\n        axios({\n          method: \"post\",\n          url:\n            \"angular.do?sysparm_type=view_form.login\",\n          data: formBody,\n          config: {\n            headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" }\n          }\n        })\n          .then(function(response) {\n            if (response.data.status==='error') {\n              message.error(response.data.message)\n            } else if (response.data.status==='success'){\n              message.success(response.data.message)\n              setTimeout(()=>{window.location = window.mainAppPage;},500);\n            } else {\n              message.warning('Unknown response status'+response.data.message)\n            }\n          })\n          .catch(function(response) {\n            message.error('Network error. Cannot log in.')\n          });\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    if (this.isLoggedIn()) {\n      window.location = window.mainAppPage;\n    }\n    return (\n      <div>\n      <div className={this.isLoggedIn() ? ' ' : ' hidden'}>\n        Successfully logged in...\n      </div>\n      <div className={\"lContainer\"+(this.isLoggedIn() ? ' hidden' : ' ')}>\n      <div className=\"lItem\">\n          <div className=\"loginImage\">\n            <img src={loginImg} width=\"300\" style={{position: 'relative'}} alt=\"login\"/>\n          </div>\n          <div className=\"loginForm\">\n            <h2>Login</h2>\n              <Form onSubmit={this.handleSubmit} className=\"login-form\">\n              <FormItem>\n                {getFieldDecorator(\"userName\", {\n                  rules: [{ required: true, message: \"Please enter your username\" }]\n                })(\n                  <Input\n                    prefix={<Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                    placeholder=\"Username\"\n                  />\n                )}\n              </FormItem>\n              <FormItem>\n                {getFieldDecorator(\"password\", {\n                  rules: [{ required: true, message: \"Please enter your Password\" }]\n                })(\n                  <Input\n                    prefix={<Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                    type=\"password\"\n                    placeholder=\"Password\"\n                  />\n                )}\n              </FormItem>\n              <FormItem>\n                {getFieldDecorator(\"remember\", {\n                  valuePropName: \"checked\",\n                  initialValue: true\n                })(<Checkbox>Remember me</Checkbox>)}\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  className=\"login-form-button\"\n                >\n                  Log in\n                </Button>\n              </FormItem>\n            </Form>\n          </div>\n      </div>\n      <div className=\"footer\">\n        <a href=\"\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"footerLink\">Powered by React</a>\n      </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nconst login = Form.create()(NormalLoginForm);\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"/about\">About</Link>\n          </li>\n          <li>\n            <Link to=\"/users\">Users</Link>\n          </li>\n        </ul>\n      </nav>\n\n\n      <Routes>\n        <Route path=\"/\" element={ <Home/> } />\n        <Route path=\"/about\" element={ <login/> } />\n        {/* <Route path=\"/users\" element={ <Users/> } /> */}\n      </Routes>\n    </div>\n  );\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}