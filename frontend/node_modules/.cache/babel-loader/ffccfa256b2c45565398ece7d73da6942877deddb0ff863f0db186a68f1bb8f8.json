{"ast":null,"code":"import _regeneratorRuntime from\"/Users/NghiaKhang/Coding/Projects/boom_mail/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/NghiaKhang/Coding/Projects/boom_mail/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import Container from'@mui/material/Container';import Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import{useFormData}from'../../hooks/useFormData';import{addMailsApi}from'../../api';import{localCache}from'../../utils/localStorage';import{useAlert}from'../../contexts/alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var _useFormData=useFormData(),formData=_useFormData.formData,onInputChange=_useFormData.onInputChange;var _useAlert=useAlert(),showError=_useAlert.showError;var transformEmails=function transformEmails(emails){return emails.trim().replace(/[ ]+/g,'').split(/\\n/);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var token,number,emails,_error$response,_error$response$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;token=localCache.getUserToken();number=formData.number,emails=formData.emails;_context.next=6;return addMailsApi({token:token,n_spam:number},transformEmails(emails));case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);showError((_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",sx:{mt:8},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{id:\"input-emails\",label:\"Danh s\\xE1ch email\",multiline:true,minRows:8,maxRows:8,required:true,fullWidth:true,name:\"emails\",onChange:onInputChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{id:\"input-password\",label:\"S\\u1ED1 l\\u01B0\\u1EE3t\",required:true,fullWidth:true,name:\"number\",onChange:onInputChange})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{my:3},fullWidth:true,children:\"B\\u1EAFt \\u0111\\u1EA7u\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{id:\"logs\",label:\"K\\u1EBFt qu\\u1EA3\",multiline:true,minRows:8,maxRows:8,fullWidth:true})})]})});}","map":{"version":3,"names":["React","Container","Grid","Box","TextField","Button","useFormData","addMailsApi","localCache","useAlert","Home","formData","onInputChange","showError","transformEmails","emails","trim","replace","split","handleSubmit","e","preventDefault","token","getUserToken","number","n_spam","response","data","message","mt","display","flexDirection","alignItems","my"],"sources":["/Users/NghiaKhang/Coding/Projects/boom_mail/src/pages/Home/index.jsx"],"sourcesContent":["import React from 'react';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { useFormData } from '../../hooks/useFormData';\nimport { addMailsApi } from '../../api';\nimport { localCache } from '../../utils/localStorage';\nimport { useAlert } from '../../contexts/alert';\n\nexport default function Home() {\n  const { formData, onInputChange } = useFormData();\n  const { showError } = useAlert();\n\n  const transformEmails = (emails) => {\n    return emails.trim().replace(/[ ]+/g, '').split(/\\n/);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localCache.getUserToken();\n      const { number, emails } = formData;\n      await addMailsApi({ token, n_spam: number }, transformEmails(emails));\n    } catch (error) {\n      showError(error?.response?.data?.message || error?.message);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\" sx={{ mt: 8 }}>\n      <Grid container spacing={2}>\n        <Grid item xs={6}>\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n            }}\n          >\n            <Box component=\"form\" onSubmit={handleSubmit}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <TextField\n                    id=\"input-emails\"\n                    label=\"Danh sách email\"\n                    multiline\n                    minRows={8}\n                    maxRows={8}\n                    required\n                    fullWidth\n                    name=\"emails\"\n                    onChange={onInputChange}\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <TextField\n                    id=\"input-password\"\n                    label=\"Số lượt\"\n                    required\n                    fullWidth\n                    name=\"number\"\n                    onChange={onInputChange}\n                  />\n                </Grid>\n              </Grid>\n              <Button type=\"submit\" variant=\"contained\" sx={{ my: 3 }} fullWidth>\n                Bắt đầu\n              </Button>\n            </Box>\n          </Box>\n        </Grid>\n        <Grid item xs={6}>\n          <TextField id=\"logs\" label=\"Kết quả\" multiline minRows={8} maxRows={8} fullWidth />\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}