{"ast":null,"code":"import _regeneratorRuntime from\"/Users/NghiaKhang/Coding/Projects/boom_mail/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/NghiaKhang/Coding/Projects/boom_mail/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import Container from'@mui/material/Container';import Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Link from'@mui/material/Link';import{useNavigate}from'react-router-dom';import loginImg from'../../imgs/login.png';import{Img}from'../../styles';import{URL}from'../../config/constants';import{getUser,LoginApi}from'../../api';import{useFormData}from'../../hooks/useFormData';import{localCache}from'../../utils/localStorage';import{useAlert}from'../../contexts/alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useFormData=useFormData(),formData=_useFormData.formData,onInputChange=_useFormData.onInputChange;var navigate=useNavigate();var _useAlert=useAlert(),showError=_useAlert.showError;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var token,user,_error$response,_error$response$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return LoginApi(formData);case 4:token=_context.sent;if(token){_context.next=8;break;}showError('Sai email hoặc mật khẩu');return _context.abrupt(\"return\");case 8:localCache.setUserToken(token);_context.next=11;return getUser();case 11:user=_context.sent;localCache.setUser(user);navigate(URL.HOME,{replace:true});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);showError((_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message));case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",sx:{mt:8},children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Img,{src:loginImg,alt:\"logo login\",width:\"auto\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{id:\"input-email\",type:\"email\",label:\"Email\",name:\"email\",required:true,fullWidth:true,onChange:onInputChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{id:\"input-password\",label:\"M\\u1EADt kh\\u1EA9u\",type:\"password\",name:\"password\",required:true,fullWidth:true,onChange:onInputChange})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{my:3},fullWidth:true,children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:URL.SIGNUP,variant:\"body2\",children:\"B\\u1EA1n ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n? \\u0110\\u0103ng k\\xED\"})})})]})]})});}","map":{"version":3,"names":["React","Container","Grid","Box","TextField","Button","Link","useNavigate","loginImg","Img","URL","getUser","LoginApi","useFormData","localCache","useAlert","Login","formData","onInputChange","navigate","showError","handleSubmit","e","preventDefault","token","setUserToken","user","setUser","HOME","replace","response","data","message","mt","marginTop","display","flexDirection","alignItems","my","SIGNUP"],"sources":["/Users/NghiaKhang/Coding/Projects/boom_mail/src/pages/Login/index.jsx"],"sourcesContent":["import React from 'react';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport Link from '@mui/material/Link';\nimport { useNavigate } from 'react-router-dom';\nimport loginImg from '../../imgs/login.png';\nimport { Img } from '../../styles';\nimport { URL } from '../../config/constants';\nimport { getUser, LoginApi } from '../../api';\nimport { useFormData } from '../../hooks/useFormData';\nimport { localCache } from '../../utils/localStorage';\nimport { useAlert } from '../../contexts/alert';\n\nexport default function Login() {\n  const { formData, onInputChange } = useFormData();\n  const navigate = useNavigate();\n  const { showError } = useAlert();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = await LoginApi(formData);\n\n      if (!token) {\n        showError('Sai email hoặc mật khẩu');\n        return;\n      }\n\n      localCache.setUserToken(token);\n      const user = await getUser();\n      localCache.setUser(user);\n      navigate(URL.HOME, { replace: true });\n    } catch (error) {\n      showError(error?.response?.data?.message || error?.message);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xs\" sx={{ mt: 8 }}>\n      <Box\n        sx={{\n          marginTop: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n        }}\n      >\n        <Img src={loginImg} alt=\"logo login\" width=\"auto\" />\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 3 }}>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <TextField\n                id=\"input-email\"\n                type=\"email\"\n                label=\"Email\"\n                name=\"email\"\n                required\n                fullWidth\n                onChange={onInputChange}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                id=\"input-password\"\n                label=\"Mật khẩu\"\n                type=\"password\"\n                name=\"password\"\n                required\n                fullWidth\n                onChange={onInputChange}\n              />\n            </Grid>\n          </Grid>\n          <Button type=\"submit\" variant=\"contained\" sx={{ my: 3 }} fullWidth>\n            Đăng nhập\n          </Button>\n          <Grid container justifyContent=\"flex-end\">\n            <Grid item>\n              <Link href={URL.SIGNUP} variant=\"body2\">\n                Bạn chưa có tài khoản? Đăng kí\n              </Link>\n            </Grid>\n          </Grid>\n        </Box>\n      </Box>\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}